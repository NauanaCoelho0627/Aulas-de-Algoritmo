<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atividade Json 2</title>
</head>
<body>

    <h2>Cadastro de Produtos - ESTOQUE</h2>

    <h4>Informe o nome do produto</h4>
        <input id="in_produto">

    <h4>Informe o valor do produto</h4>
        <input id="in_preco" type="number">

    <h4>Selecione a categoria do produto</h4>
        <select id="sel_categoria">
            <option value=""></option>
            <option value="Gerais">Gerais</option>
            <option value="Alimentos">Alimentos</option>
            <option value="Eletrônicos">Eletrônicos</option>
        </select>

        <br><br>

    <button onclick="cadastrar()">Registrar Produto</button>
    <button onclick="listar()">Listar Produtos</button>

        <br><br>

    <div id="div_produto"></div>

    <h2>Filtros</h2>

    <h4>Filtra por Produto:</h4>
        <input id="in_pesquisa">
        <button onclick="procurar()">Procurar</button>

    <h4>Filtrar por tipo</h4>
        <select id="sel_categoriaPesquisa">
            <option value=""></option>
            <option value="Gerais">Gerais</option>
            <option value="Alimentos">Alimentos</option>
            <option value="Eletrônicos">Eletrônicos</option>
        </select>
        <button onclick="filtro()">Filtrar</button>

        <br><br>

        <div id="div_resultado"></div>
    
</body>
</html>
<script>
    produtos = [];

    function cadastrar(){
        var prod = in_produto.value;
        var preco = in_preco.value;
        var tipo = sel_categoria.value;


        if(prod == "" || preco == "" || tipo == ""){
            alert('Preencha corretamente os campos')
        }else{
            var estoque = {
            produto: prod,
            valor: preco,
            categoria: tipo
        }  

        produtos.push(estoque)
        }

        
    }

    function listar(){
        div_produto.innerHTML = ''

        for(i = 0; i < produtos.length; i++ ){
            var produtoAtual = produtos[i]

            div_produto.innerHTML += `Produto: ${produtoAtual.produto} <br> Valor: ${produtoAtual.valor} <br> Categoria: ${produtoAtual.categoria}<br><br>`
        }
    }

    function procurar(){
        var p = in_pesquisa.value;

        div_resultado.innerHTML = ''

        for(i = 0; i < produtos.length; i++){
            var produtoAtual = produtos[i]

            if(p == produtoAtual.produto){
                div_resultado.innerHTML = `Produto: ${produtoAtual.produto} <br> Valor: ${produtoAtual.valor} <br> Categoria: ${produtoAtual.categoria}<br><br>`
            }
        }

        if(p != produtoAtual.produto){
                alert('Produto não cadastrado')
        }
    }

    function filtro(){
        var f = sel_categoriaPesquisa.value

        div_resultado.innerHTML = ''

        for(j = 0; j < produtos.length; j++){
            var produtoAtual = produtos[j]

            if(f == produtoAtual.categoria){
                div_resultado.innerHTML = `Produtos da categoria: ${f} <br>`

                div_resultado.innerHTML += `<br>Produto: ${produtoAtual.produto} <br> Valor: ${produtoAtual.valor} <br> Categoria: ${produtoAtual.categoria}<br><br>`
            }
        }

        if(f != produtoAtual.categoria){
                alert('Produto não cadastrado')  
            }
    }


</script>